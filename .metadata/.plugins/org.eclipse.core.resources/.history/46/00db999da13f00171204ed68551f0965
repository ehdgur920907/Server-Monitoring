package com.monitoring.controller;

import java.util.ArrayList;

import org.apache.ibatis.session.SqlSession;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;

import com.monitoring.dto.UsedInformationDto;
import com.monitoring.mapper.Mapper;

@Controller
public class UsedController {
	@Autowired
	private SqlSession sqlSession;
	
	@RequestMapping("/monitoring/{id}/memory")
	public String getUsedMemory(@PathVariable String id, Model model) {
		Mapper mapper = sqlSession.getMapper(Mapper.class);
		ArrayList<UsedInformationDto> arrayListUsedInformationDto = new ArrayList<UsedInformationDto>();
		for (int i = 0; i < 5; i++) {
			int j = 2;
			arrayListUsedInformationDto.add(mapper.selectUsedInformation(id).get(mapper.selectUsedInformation(id).size() - j));
			j = j + 10;
		}
		
		model.addAttribute("arrayListUsedInformation", arrayListUsedInformationDto);
		return "/jsp/memory";
	}
}
