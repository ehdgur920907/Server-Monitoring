package com.information.get;

import java.io.File;
import java.text.DecimalFormat;

import com.information.model.Disk;

public class GetDisk implements Get {
	@Override
	public Disk execute() {
		// String drive;
		double totalDisk, freeDisk, usedDisk;
		Disk disk = new Disk();
		File[] roots = File.listRoots();

		for (File root : roots) {
			// drive = root.getAbsolutePath();
			totalDisk = root.getTotalSpace() / Math.pow(1024, 3);
			usedDisk = root.getUsableSpace() / Math.pow(1024, 3);
			freeDisk = totalDisk - usedDisk;

			totalDisk = Double.parseDouble(String.format("%.2f", totalDisk));
			usedDisk = Math.round((usedDisk * 100)) / 100.0;
			freeDisk = Math.round((freeDisk * 100)) / 100.0;

			disk.setTotalDisk(String.valueOf(totalDisk));
			disk.setUsedDisk(String.valueOf(usedDisk));
			disk.setFreeDisk(String.valueOf(freeDisk));
		}
		return disk;
	}
}
